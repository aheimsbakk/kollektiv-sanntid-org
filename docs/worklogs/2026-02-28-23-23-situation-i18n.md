---
when: 2026-02-28T23:23:54Z
why: Situation texts from Entur API are available in multiple languages; the UI should display them in the active UI language.
what: Pick situation text by UI language with fallback to English then first available entry
model: opencode/claude-sonnet-4-6
tags: [i18n, situations, entur, parser]
---

Added `pickLocalised(entries, lang)` helper to `src/entur/parser.js` implementing priority: UI lang → English → first entry. `parseEnturResponse` now accepts a `lang` parameter (default `'en'`). `fetchDepartures` in `src/entur/departures.js` forwards a new `lang` option to the parser. `src/app/fetch-loop.js` passes `getLanguage()` at fetch time. Tests in `tests/entur.parse.test.mjs` extended to cover all four fallback cases. Bumped to v1.33.2.

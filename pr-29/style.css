/* ======================================================================
   DEPARTURE BOARD STYLES
   ====================================================================== */

/* ----------------------------------------------------------------------
   CSS VARIABLES / DESIGN TOKENS
   Modify these to customize colors, spacing, and sizing globally
   ---------------------------------------------------------------------- */

/* DARK THEME (default) */
:root {
  /* Color palette - Dark Theme */
  --bg: linear-gradient(180deg, #0b0f1a, #081021);
  --text-primary: #ffffff;
  --text-secondary: rgba(255, 255, 255, 0.8);
  --accent: #72e0a1;
  --danger: #ff6b6b;
  
  /* Overlay colors - Dark Theme */
  --overlay-light: rgba(255, 255, 255, 0.1);
  --overlay-medium: rgba(0, 0, 0, 0.9);
  --overlay-strong: rgba(0, 0, 0, 0.95);
  --shadow-color: rgba(0, 0, 0, 0.3);
  --border-muted: rgba(255, 255, 255, 0.1);
  
  /* Text shadows - Dark Theme */
  --text-shadow-light: 0px 2px 4px rgba(0, 0, 0, 0.8), 0px 0px 8px rgba(0, 0, 0, 0.6);
  
  /* Autocomplete highlight - Dark Theme */
  --autocomplete-highlight-bg: #ffffff;
  --autocomplete-highlight-fg: #081021;
  
  /* Dropdown highlight - Dark Theme */
  --dropdown-highlight-bg: #ffffff;
  --dropdown-highlight-fg: #081021;
  
  /* Typography */
  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, 'Roboto Mono', 'Courier New', monospace;
  --large-scale: 6vw; /* Base font size for large displays */
  
  /* Layout spacing - adjust these to control vertical rhythm */
  --vertical-gap: 0em;         /* Gap between departure rows */
  --header-gap: 0.5em;         /* Gap between header elements */
  --departure-padding: 0px 0px; /* Internal padding for each departure */
  --departure-max-width: 100vw; /* Maximum width of departure items */
  --autocomplete-item-gap: 6px; /* Gap between autocomplete list items */
  
  /* Options panel width (responsive) */
  --options-panel-width: min(360px, 100vw);
  
  /* Text size scale multipliers - used with .text-size-* classes */
  --scale-tiny: 0.5;
  --scale-small: 0.75;
  --scale-medium: 0.9;
  --scale-large: 1;
  --scale-xlarge: 1.25;
}

/* LIGHT THEME */
:root.theme-light {
  /* Color palette - Light Theme */
  --bg: linear-gradient(180deg, #f5f7fa, #e8ecf1);
  --text-primary: #1a1a1a;
  --text-secondary: rgba(0, 0, 0, 0.7);
  --accent: #2d8659;
  --danger: #d63031;
  
  /* Overlay colors - Light Theme */
  --overlay-light: rgba(0, 0, 0, 0.05);
  --overlay-medium: rgba(255, 255, 255, 0.95);
  --overlay-strong: rgba(255, 255, 255, 0.98);
  --shadow-color: rgba(0, 0, 0, 0.15);
  --border-muted: rgba(0, 0, 0, 0.1);
  
  /* Text shadows - Light Theme */
  --text-shadow-light: 0px 0px 4px rgba(255, 255, 255, 1), 0px 0px 8px rgba(255, 255, 255, 0.8), 0px 1px 2px rgba(0, 0, 0, 0.3);
  
  /* Autocomplete highlight - Light Theme */
  --autocomplete-highlight-bg: #1a1a1a;
  --autocomplete-highlight-fg: #ffffff;
  
  /* Dropdown highlight - Light Theme */
  --dropdown-highlight-bg: #1a1a1a;
  --dropdown-highlight-fg: #ffffff;
}

/* Mobile breakpoint - increase base font scale on small screens */
@media (max-width: 600px) {
  :root {
     --large-scale: 8vw;
  }
}


/* ----------------------------------------------------------------------
   BASE & RESET
   ---------------------------------------------------------------------- */

* {
  box-sizing: border-box;
}

html {
  height: 100%;
  margin: 0;
  background: var(--bg);
  /* Fix background attachment so it doesn't scroll away */
  background-attachment: fixed;
}

body {
  min-height: 100%;
  margin: 0;
  background: transparent;
  color: var(--text-primary);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
}


/* ----------------------------------------------------------------------
   MAIN LAYOUT
   ---------------------------------------------------------------------- */

.app-root {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
}

/* Shift content left when options panel is open */
body.options-open .app-root {
  transform: translateX(calc(-1 * var(--options-panel-width)));
  transition: transform 280ms ease-in-out;
}

.board {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--header-gap);
  text-align: center;
  max-width: 90vw;
}


/* ----------------------------------------------------------------------
   HEADER SECTION
   ---------------------------------------------------------------------- */

.header-wrap {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 6px;
  width: 100%;
  position: relative; /* Allows absolute positioning of header-right */
}

.header-left {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.header-controls {
  display: flex;
  align-items: center;
  gap: 8px;
}

.header-right {
  position: absolute;
  right: 0;
  top: 0;
  display: flex;
  align-items: center;
}

/* Station Dropdown */
.station-row {
  display: flex;
  align-items: center;
  gap: 6px;
}

/* Shared header button style used by theme toggle, share, language flags, and favorite */
.header-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: 1px solid var(--border-muted);
  border-radius: 6px;
  padding: 6px 8px;
  cursor: pointer;
}

.header-btn:hover:not(:disabled) {
  background: var(--overlay-light);
  border-color: var(--accent);
}

.favorite-heart-btn {
  /* Use the same visual button layout as other header buttons (theme/flags)
     so it lines up and feels consistent. */
  /* /* display: inline-flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  background: var(--overlay-light);
  color: var(--text-primary);
  border: 1px solid var(--border-muted);

  border-radius: 6px;
  cursor: pointer;
  padding: 6px 8px; */
  /* Match the global header buttons (share/theme) for consistent sizing */
  /* font-size: 26px;
  line-height: 1;
  transition: transform 0.12s ease, opacity 0.12s ease, background 0.12s ease, border-color 0.12s ease; */
  padding: 4px;
  border-radius: 6px;
  background: var(--overlay-light);
  color: var(--text-primary);
  border: 1px solid var(--border-muted);
  cursor: pointer;
  display: flex;
  font-size: 0.8em;
  align-items: center;
  justify-content: center;
  transition: background 0.2s, color 0.2s, transform 0.2s;
}

.favorite-heart-btn:hover:not(:disabled) {
  transform: translateY(-1px) scale(1.05);
  background: var(--overlay-light);
  border-color: var(--accent);
}

.favorite-heart-btn:disabled {
  cursor: default;
  opacity: 0.8;
}

.station-dropdown-container {
  position: relative;
  display: inline-block;
}

.station-title {
  font-weight: 700;
  letter-spacing: 1px;
  font-size: 0.8em;
  background: transparent;
  border: none;
  color: var(--text-primary);
  cursor: pointer;
  padding: 0;
  text-align: left;
}

.station-title:hover {
  opacity: 0.9;
}

.dropdown-arrow {
  font-size: 0.7em;
  margin-left: 4px;
}

.station-dropdown-menu {
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  margin-top: 8px;
  background: var(--overlay-medium);
  border-radius: 6px;
  padding: 6px;
  width: max-content;
  max-height: 300px;
  overflow-y: auto;
  box-shadow: 0 6px 18px var(--shadow-color);
  z-index: 1000;
  display: none;
}

.station-dropdown-menu.open {
  display: grid;
  grid-auto-rows: min-content;
  gap: 6px;
}

.station-dropdown-item {
  display: block;
  width: 100%;
  padding: 8px;
  background: transparent;
  border: none;
  color: var(--text-primary);
  text-align: left;
  cursor: pointer;
  font-size: 0.9em;
  border-radius: 4px;
  transition: background 0.2s, color 0.2s;
  white-space: nowrap;
}

.station-dropdown-item:hover,
.station-dropdown-item.selected {
  background: var(--dropdown-highlight-bg);
  color: var(--dropdown-highlight-fg);
}

.station-dropdown-empty {
  padding: 8px;
  font-size: 0.9em;
  color: var(--text-secondary);
  font-style: italic;
}

.status-chip {
  font-size: 12px;
  padding: 4px 8px;
  border-radius: 999px;
  background: var(--overlay-medium);
  color: var(--text-primary);
  display: none;
}

.status-chip.visible {
  display: inline-block;
  margin-top: 6px;
}


/* ----------------------------------------------------------------------
   BUTTONS
   Unified button styles for all interactive elements
   ---------------------------------------------------------------------- */

/* Base button style (used by options actions and language flags) */
button {
  padding: 4px 4px;
  border-radius: 6px;
  background: var(--overlay-light);
  color: var(--text-primary);
  border: 1px solid var(--border-muted);
  cursor: pointer;
  font-size: inherit;
  font-family: inherit;
  transition: background 0.2s, color 0.2s;
}

button:hover {
  background: var(--overlay-light);
}

button:active {
  background: var(--overlay-strong);
}

/* Language flag buttons */
.language-flag {
  padding: 2px 2px;
  font-size: 1em;
}

.language-flag.active {
  background: var(--text-primary);
  color: #081021;
  border-color: var(--text-primary);
}

.language-switcher {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 8px;
}

/* Gear button - uses base button styles but keeps custom size */
.gear-btn {
  font-size: 20px;
}

/* Fixed gear button in top-right corner of viewport */
.global-gear {
  position: fixed;
  right: 18px;
  top: 18px;
  z-index: 1300;
  display: flex;
  gap: 8px;
  align-items: center;
}

.global-gear .gear-btn,
.global-gear .theme-toggle-btn,
.global-gear .share-button {
  font-size: 26px;
  padding: 4px;
  border-radius: 6px;
  background: var(--overlay-light);
  color: var(--text-primary);
  border: 1px solid var(--border-muted);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s, color 0.2s, transform 0.2s;
}

.global-gear .gear-btn:hover,
.global-gear .theme-toggle-btn:hover,
.global-gear .share-button:hover {
  background: var(--overlay-light);
  transform: scale(1.05);
}

.global-gear .gear-btn:active,
.global-gear .theme-toggle-btn:active,
.global-gear .share-button:active {
  background: var(--overlay-strong);
  transform: scale(0.95);
}

/* Share URL modal box */
.share-url-box {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.8);
  z-index: 2000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
}

.share-url-content {
  background: var(--overlay-strong);
  padding: 24px;
  border-radius: 8px;
  border: 1px solid var(--border-muted);
  max-width: 500px;
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.share-url-input {
  font-family: var(--mono);
  font-size: 14px;
  padding: 12px;
  border-radius: 4px;
  border: 1px solid var(--border-muted);
  background: var(--overlay-light);
  color: var(--text-primary);
  width: 100%;
  outline: none;
}

.share-url-input:focus {
  border-color: var(--accent);
}

.share-url-close {
  padding: 10px 20px;
  border-radius: 4px;
  border: 1px solid var(--border-muted);
  background: var(--accent);
  color: var(--text-primary);
  cursor: pointer;
  font-size: 16px;
  font-weight: 500;
  transition: background 0.2s, transform 0.2s;
}

.share-url-close:hover {
  opacity: 0.9;
  transform: scale(1.02);
}

.share-url-close:active {
  transform: scale(0.98);
}


/* ----------------------------------------------------------------------
   DEPARTURES LIST
   Adjust --vertical-gap in :root to control spacing between rows
   ---------------------------------------------------------------------- */

.departures {
  display: flex;
  flex-direction: column;
  gap: var(--vertical-gap);
  width: 100%;
  align-items: center;
}

.departure {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--vertical-gap);
  padding: var(--departure-padding);
  border-radius: 6px;
  width: 100%;
  max-width: var(--departure-max-width);
  box-sizing: border-box;
}

.departure-destination {
  /* Uses proportional UI font; monospace reserved for timers */
  font-family: inherit;
  font-weight: 900;
  font-size: calc(var(--large-scale) * 0.8);
  color: var(--accent);
  display: block;
  margin: 0;
  padding: 0;
  white-space: normal;
  word-break: break-word;
  text-align: center;
  text-shadow: var(--text-shadow-light);
}

/* Stacked platform/quay display (symbol on top, code below) */
.platform-stacked {
  display: inline-flex;
  flex-direction: column;
  font-size: 0.5em;
  line-height: 0.9;
  align-items: center;
  justify-content: center;
  margin-left: 2px;
  opacity: 0.85;
  /* Center vertically on the text line */
  vertical-align: baseline;
  transform: translateY(-50%);
}

/* Cancelled departure styling */
.departure-cancelled {
  text-decoration: line-through;
  opacity: 0.6;
}

.departure-time {
  font-family: var(--mono);
  font-weight: 800;
  margin: 0;
  padding: 0;
  color: var(--text-primary);
  text-shadow: var(--text-shadow-light);
}

.departure-time-wrap {
  display: flex;
  align-items: baseline;
  gap: 14px;
  font-family: var(--mono);
  font-weight: 800;
  font-size: calc(var(--large-scale) * 0.8 * 0.8);
  color: var(--text-primary);
}

.departure-situations {
  color: var(--danger);
  font-weight: 700;
  margin: 0;
  padding: 0;
}

.empty-state {
  color: var(--text-secondary);
  font-weight: 700;
  padding: 12px 10px;
  border-radius: 6px;
}


/* ----------------------------------------------------------------------
   TEXT SIZE UTILITY CLASSES
   Apply .text-size-{tiny|small|medium|large|xlarge} to <html>
   ---------------------------------------------------------------------- */

.text-size-tiny .departure-destination,
.text-size-tiny .departure-time-wrap {
  font-size: calc(var(--large-scale) * (var(--scale-tiny) * 0.8));
}

.text-size-small .departure-destination,
.text-size-small .departure-time-wrap {
  font-size: calc(var(--large-scale) * (var(--scale-small) * 0.8));
}

.text-size-medium .departure-destination,
.text-size-medium .departure-time-wrap {
  font-size: calc(var(--large-scale) * (var(--scale-medium) * 0.8));
}

.text-size-large .departure-destination,
.text-size-large .departure-time-wrap {
  font-size: calc(var(--large-scale) * (var(--scale-large) * 0.8));
}

.text-size-xlarge .departure-destination,
.text-size-xlarge .departure-time-wrap {
  font-size: calc(var(--large-scale) * (var(--scale-xlarge) * 0.8));
}


/* ----------------------------------------------------------------------
   OPTIONS PANEL (Slide-in from right)
   ---------------------------------------------------------------------- */

.options-panel {
  position: fixed;
  right: 0;
  top: 0;
  height: 100vh;
  width: var(--options-panel-width);
  background: var(--bg);
  box-shadow: -8px 0 24px var(--shadow-color);
  transform: translateX(100%); /* Hidden by default */
  transition: transform 280ms ease-in-out;
  padding: 20px;
  overflow: auto;
  z-index: 1200;
  color: var(--text-primary);
}

.options-panel.open {
  transform: translateX(0); /* Slide in */
}

.options-panel h3 {
  margin-top: 0;
  color: var(--text-primary);
}

.options-row {
  display: flex;
  flex-direction: column;
  margin-bottom: 12px;
}

.options-row label {
  font-size: 0.9rem;
  margin-bottom: 6px;
  color: var(--text-primary);
}

.options-row input[type='text'],
.options-row input[type='number'],
.options-row select {
  padding: 8px;
  border-radius: 6px;
  border: 1px solid var(--border-muted);
  background: transparent;
  color: var(--text-primary);
}

/* Station autocomplete styles */
.station-autocomplete-wrap { 
  position: relative; 
  width: 100%; 
}

.station-autocomplete-wrap > input[type='text'] { 
  width: 100%; 
  box-sizing: border-box; 
}

.station-autocomplete-list {
  position: absolute;
  left: 0;
  right: 0;
  z-index: 2000;
  list-style: none;
  margin: 6px 0 0 0;
  padding: 6px;
  display: none;
  border-radius: 6px;
  overflow: auto;
  background: var(--overlay-medium);
  box-shadow: 0 6px 18px var(--shadow-color);
  display: grid;
  grid-auto-rows: min-content;
  gap: var(--autocomplete-item-gap);
}

.station-autocomplete-list.open { 
  display: grid; 
}

.station-autocomplete-list li {
  padding: 8px;
  cursor: pointer;
  background: transparent;
  color: var(--text-primary);
  border-radius: 4px;
}

/* Invert colors when active (keyboard) or hovered by mouse */
.station-autocomplete-list li.highlighted,
.station-autocomplete-list li:hover {
  background: var(--autocomplete-highlight-bg);
  color: var(--autocomplete-highlight-fg);
}


.options-actions {
  display: flex;
  justify-content: flex-end;
  margin-top: 12px;
}

.options-toast {
  position: absolute;
  left: 12px;
  right: 12px;
  bottom: 18px;
  padding: 8px 12px;
  background: var(--overlay-strong);
  color: var(--text-primary);
  border-radius: 6px;
  transition: opacity 240ms ease-in-out;
  display: none;
}

.options-toast.visible {
  display: block;
}


/* ----------------------------------------------------------------------
   TRANSPORT MODE CHECKBOXES
   ---------------------------------------------------------------------- */

.modes-checkboxes {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: 8px;
}

.modes-label-wrap {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.modes-toggle-all {
  width: 16px;
  height: 16px;
  cursor: pointer;
}

.mode-checkbox-label {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 6px;
  border-radius: 6px;
  font-size: 0.92em;
  color: var(--text-primary);
}

.mode-checkbox-label span {
  margin-left: 6px;
}

.mode-icon {
  font-size: 1em;
  display: inline-block;
  width: 1.3em;
  text-align: center;
  text-shadow: var(--text-shadow-light);
}

.mode-checkbox-label input[type=checkbox] {
  margin-left: 4px;
  width: 14px;
  height: 14px;
}


/* ----------------------------------------------------------------------
   DEBUG PANEL
   Controlled by .open class; used for development diagnostics
   ---------------------------------------------------------------------- */

.debug-panel {
  display: none;
  max-width: 90vw;
  overflow: auto;
  padding: 8px;
  border-radius: 6px;
  background: var(--overlay-strong);
  color: var(--text-primary);
  font-family: var(--mono);
  font-size: 0.9em;
}

.debug-panel.open {
  display: block;
}


/* ----------------------------------------------------------------------
   UTILITY CLASSES
   ---------------------------------------------------------------------- */

/* Screen reader only - visually hidden but accessible */
.visually-hidden {
  position: absolute !important;
  height: 1px;
  width: 1px;
  overflow: hidden;
  clip: rect(1px, 1px, 1px, 1px);
  white-space: nowrap;
}

/* ----------------------------------------------------------------------
   APP FOOTER (Version & GitHub link)
   ---------------------------------------------------------------------- */

.app-footer {
  position: fixed;
  bottom: 18px;
  left: 18px;
  z-index: 1000;
  font-size: 12px;
  color: var(--text-primary);
  background: var(--overlay-medium);
  padding: 6px 10px;
  border-radius: 6px;
  backdrop-filter: blur(8px);
}

.app-footer a {
  color: var(--accent);
  text-decoration: none;
}

.app-footer a:hover {
  text-decoration: underline;
}

/* Service Worker Update Toast */
#sw-update-toast {
  position: fixed;
  bottom: 18px;
  left: 18px;
  z-index: 2000;
  font-size: 12px;
  color: var(--text-primary);
  background: var(--overlay-strong);
  padding: 8px 12px;
  border-radius: 6px;
  backdrop-filter: blur(8px);
  opacity: 1;
  transition: opacity 240ms ease-in-out;
}

#sw-update-toast.hidden {
  opacity: 0;
  pointer-events: none;
}
